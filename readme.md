2019年SEU-Xilinx国际暑期学校团队项目设计文档

# 第一部分
设计概述 /Design Introduction
（请简要描述一下你的设计：1. 功能说明；2. 所用到的设备清单）
功能：识别数字字符并显示识别结果。通过摄像头采集图像，使用FPGA读取图像数据进行处理，根据不同数字的特征，对0-9十个数字进行分类，并在hdmi显示器上进行显示。
清单：sea-s7开发板、mipi摄像头、LCD屏、SD卡、HDMI显示屏、HDMI连接线

# 第二部分
详细设计 /Detailed Design 
（请详细说明你作品要实现的所有功能以及如何组建系统以实现该功能，还包括为实现该功能需要用到的所有参数和所有操作的详细说明，必要的地方多用图表形式表述）
如因文档篇幅限制无法详述，可提供附件。
功能：识别数字字符并显示识别结果。
实现方法：
总体实现流如下框图所示：






系统采用MicroBlaze软核对摄像头进行控制，通过例化IIC模块与摄像头进行初始化，摄像头的初始化使用软件实现。对摄像头采集的数据进行转化，通过HDMI显示模块进行实时显示。
数字识别算法使用Verilog编程实现，包括图像数据的获取、图像预处理、数字识别和数字显示模块。图像预处理包括图像灰度处理、图像降噪和二值化处理。
- 灰度处理：为了提高系统运行效率以及节省硬件资源，采取降维的方法来对图像灰度化处理。当彩色图像三种分量的值相等时，图像将变成灰色。彩色图像中R、G、B三分量分别代表红色、绿色、蓝色的亮度值，而人眼对这三种颜色的敏感度是不同的，其中绿色的敏感度最高，红色次之，蓝色的敏感度最低。因此，对这三个分量要以不同的权值进行加权平均得到较合理的灰度图像：[R,G,B]=R*0.299+G*0.587+B*0.114。
- 图像去燥：本设计利用均值滤波法对图像数据展开图像去噪，该方式为线性滤波算法。先对图像中的像素构建模板，而后对模板中的像素展开处理，即求平均值，最后将得到的平均值赋给原来的像素值。
- 二值化处理：对摄像头所采集到的图像信息去噪声后，还要经过处理，才能将需要识别的有效信息与无效信息区分开，便于进行后期的数字识别。而设定一个阈值T后，将所有采集到的像素点的灰度值与T相比较后，便可以将所有的像素点划分为两部分。本设计使用阈值T=100对灰度图像进行二值化，之后采用二值化数据进行字符识别。
数字识别算法：字符识别模块便是将前期经过处理的图像数据进行识别，判断出所采集到图像中的数字。字符识别模块内部由边沿计算模块和识别模块组成。本系统所采用的是基于字符特征分析的识别算法对数字字符进行识别，因此先要根据字符模块输出的每个字符的边界位置信息确定出三条直线，在根据交点数量以及交点位置进行识别结果的判断。
在本设计中采用提取数字字符的统计特征的方法来识别图像中的数字。即在所识别数字上画两横一竖的三条线，第一条横线位于高度的2/5，第二条横线位于高度2/3处，竖线位于宽度的1/2，接下来对这三条线与数字的交点个数及交点位置进行统计和分析，达到区分出不同数字的目的。以数字7为例，穿越特征示意图如图所示。
 
对数字划线分割，如下图：根据划线的交点个数进行分类进行识别。

数字	与y交叉点个数	与x1交叉点个数	与x2交叉点个数	分类
0	2	2	2	A
1	1	1	1	B
2	3	1	1	C
3	3	1	1	C
4	2	2	1	D
5	3	1	1	C
6	3	1	2	E
7	2	1	1	F
8	3	2	2	G
9	3	2	1	H

数字	与x1的交叉点位置（左，右）	与x2的交叉点位置（左，右）	分类
2	右	左	I(C)
3	右	右	J(C)
5	左	右	K(C)

操作说明：
将需要识别的字符放在屏幕中间的框内，观察显示器左上角的显示区域，会识别出相应的数字。要求数字颜色为黑色，背景为白色，每次识别一个数字。 

# 第三部分
完成情况及性能参数 /Final Design & Performance Parameters
（作品完成情况，附照片/视频链接）

已经实现：
摄像头采集，图像的二值化处理，数字识别，屏幕显示结果。

性能参数：
可以识别打印体数字字符，每次识别单个数字。
